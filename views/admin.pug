doctype html
html
    head
        title #{name} - QR Party
        include head
    body
        include logo

        .container
            .row
                .col
                    h1 #{name}

            .row
                .col-sm
                    .w11
                        a(href="/vjay/" + pid, rel="nofollow", class="btn btn-sq btn-primary")
                            i(class="fa fa-chart-line fa-3x")
                            br
                            | RealTime Chart

                .col-sm
                    .w11
                        a(href="/encoder/"+pid, rel="nofollow", class="btn btn-sq btn-primary")
                            i(class="fa fa-qrcode fa-3x")
                            br
                            | Print QR List

                .col-sm
                    .w11
                        a(href="/djinfo/"+pid, rel="nofollow", class="btn btn-sq btn-primary")
                            i(class="fa fa-headphones fa-3x")
                            br
                            | Print DJ Info

            .row

                .col-sm
                    .w11
                        a(href="/djinfo/"+pid, rel="nofollow", class="btn btn-sq btn-primary")
                            i(class="fa fa-check-square fa-3x")
                            br
                            | Voting Station

                .col-sm
                    .w11
                        a(href="/queue/"+pid, rel="nofollow", class="btn btn-sq btn-primary")
                            i(class="fa fa-list-ol fa-3x")
                            br
                            | LineUp Queue

                .col-sm
                    .w11
                        a(href="/api/"+pid, rel="nofollow", class="btn btn-sq btn-primary")
                            i(class="fa fa-book fa-3x")
                            br
                            | REST API DOC



            .row
                .col.mt8
                    include queueForm
            .row
                .col
                    legend Current pool

                    #there

                    script(type='text/javascript').
                        /*
                            function printStat() {


                                d3.json('/json/vstat/#{pid}', function (xdata) {

                                    var total = parseInt(xdata.vote1) + parseInt(+xdata.vote2) + parseInt(xdata.vote3) ;
                                    if (total ==0) { total=1; }

                                    var size1 = Math.floor( (xdata.vote1 / total) * 100);
                                    var size2 = Math.floor( (xdata.vote2 / total) * 100);
                                    var size3 = Math.floor( (xdata.vote3 / total) * 100)

                                    var there = d3.select("#there");
                                    there.append("div").html(
                                        '<table >'+
                                        '<tr valign=top ><td nowrap="nowrap" >'+xdata.name1+' &nbsp;('+xdata.vote1+')&nbsp;</td><td width=100% ><div class="progress progress-info"><div class="bar" style="width: '+size1+'%"></div></div></td></tr>'+
                                        '<tr valign=top ><td nowrap="nowrap" >'+xdata.name2+' &nbsp;('+xdata.vote2+')&nbsp;</td><td width=100% ><div class="progress progress-info"><div class="bar" style="width: '+size2+'%"></div></div></td></tr>'+
                                        '<tr valign=top ><td nowrap="nowrap" >'+xdata.name3+' &nbsp;('+xdata.vote3+')&nbsp;</td><td width=100% ><div class="progress progress-info"><div class="bar" style="width: '+size3+'%"></div></div></td></tr>'+
                                        '</table>'
                                        )

                                    delete size1;
                                    delete size2;
                                    delete size3;

                                    });

                                }

                        printStat()

                    legend Pool Queue

                    style.
                        .setitem {
                            background: #eeeeff;
                            border-radius: 7px;
                            padding: 12px;
                            margin-top: 5px;
                            size: 14px;
                        }

                    #here

                    script(type='text/javascript').

                        d3.json('/json/setlist/#{pid}', function (somedata){
                            var here = d3.select("#here");
                            var t={};
                            //console.log( somedata );
                            for (var k=0 in somedata)
                            {
                                (function(k){

                                t = JSON.parse( somedata[k] );
                                //console.log(t.set1name);

                                here.append("div")
                                .attr('id',k)
                                .attr('class','setitem')
                                .html('<table><tr><td><a href=/publish/#{partytag}/'+k+'  ><button class=btn >Publish</button></a></td><td width=100% ><center><span class="label label-success" >'+t.set1name +'</span> vs <span class="label label-warning" >'+ t.set2name +'</span> vs <span class="label label-info" > '+t.set3name+'</span></center></td><td><a href=/delete/#{partytag}/'+k+' ><span class="icon-remove-sign"></span></a></td></tr></table>');

                                })(k);
                            }
                        });
                    hr
















